<?php	class AnnouncementsModel extends CRUDModel {		public $r_id;		public $lang_id;		public $itemTitle;		public $content;		public $image;		public $dateStart;		public $dateEnd;		public $forLoggedIn;		public $isFirst;				public static $tplViewFile;		public static $multiLang = true;				public function __construct() {					$this->r_id = new stdClass();			$this->r_id->value = null;			$this->lang_id = new stdClass();			$this->lang_id->value = null;					$messages = Application::$messages['model_news'];			$this->itemTitle = new ModelTextField("itemTitle", $messages['field_itemTitle'], true, true);			$this->itemTitle->required = false;			$this->content = new ModelTinyMce("content", $messages['field_content'], true, true);			$this->content->required = false;			$this->image = new ModelFMImageField("image", Application::$messages['model_news']['field_image'], false, true);			$this->image->required = false;			$this->image->common = true;			$this->dateStart = new ModelDateField("dateStart", $messages['field_date'].'1', true, true);			$this->dateStart->common = true;			$this->dateEnd = new ModelDateField("dateEnd", $messages['field_date'].'2', true, true);			$this->dateEnd->common = true;						$this->forLoggedIn = new ModelSelectField("forLoggedIn", $messages['field_forLoggedIn'], Array(				'0' => Application::$messages['common_messages']['nno'],				'1' => Application::$messages['common_messages']['yyes'],			), true, true);			$this->forLoggedIn->common = true;			$this->isFirst = new ModelSelectField("isFirst", $messages['field_isFirst'], Array(				'0' => Application::$messages['common_messages']['nno'],				'1' => Application::$messages['common_messages']['yyes'],			), true, true);			$this->isFirst->common = true;		}		public function getSearchUrl() {			return 'announcements/view/' . $this->r_id->value;		}				public static function initialize() {			self::$displayFields = Array('image', 'itemTitle', 'dateStart', 'dateEnd');			self::$title = Application::$messages['model_announcements']['title'];			self::$iconPath = 'category-icons.png';			self::$multiLang = true;			self::$searchable = true;			self::$viewUrl = 'announcements';			self::$useOwnViewUrl = false;			self::$searchSettings = Array(				'title_field' => 'itemTitle',				'content_field' => 'content',			);		}						public static function getAnnList($lang, $start, $limit) {			$date = date('Y-m-d');			$sql = "SELECT `".self::getTableName()."`.* 			FROM `".self::getTableName()."` 			WHERE 			`".self::getTableName()."`.`lang_id` = '{#1}'";			if (!Application::$storage['logged_in']) {				$sql .= " AND `forLoggedIn` <> '1' ";			}			$sql .= " ORDER BY `".self::getTableName()."`.`dateStart` DESC 			LIMIT " . ($start * $limit) . "," . $limit;			$r = self::fQuery($sql, Array($lang));			$c = count($r);			for ($i = 0; $i < $c; $i++) {				$r[$i]['description'] = Utils::parseWords($r[$i]['content'], 1);			}			return $r;		}			}?>