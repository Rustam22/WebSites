<?php	class VideoGalleryCategoryModel extends CRUDModel {				public $r_id;		public $lang_id;		public $iTitle;		public $date;				public function __construct() {			$messages = Application::$messages['model_news'];						$this->iTitle = new ModelTextField("iTitle", $messages['field_itemTitle'], true, true);						$this->date = new ModelDateField("date", $messages['field_date'], true, true);			$this->date->common = true;		}				public static function initialize() {			self::$displayFields = Array('iTitle', 'date');			self::$title = Application::$messages['model_v_gallery_category']['title'];			self::$iconPath = 'video-category.png';			self::$multiLang = true;			self::$viewUrl = 'news';			self::$useOwnViewUrl = false;		}				public static function getVideos($lang) {			$cT = self::getTableName();			$pT = VideoGalleryVideoModel::getTableName();			$data = self::fQuery("				SELECT `ct`.*, `pt`.`id` as `v_id`, `pt`.`image`, `pt`.`iTitle` as `video_title`				FROM `".$cT."` `ct`				INNER JOIN `".$pT."` `pt`				ON				`ct`.`id` = `pt`.`category`				WHERE `ct`.`lang_id` = '{#1}'				ORDER BY `ct`.`id`			", Array($lang));						$newData = Array();			foreach ($data as $k => $v) {				$newData[$v['r_id']]['category']['title'] = $v['iTitle'];				$newData[$v['r_id']]['category']['r_id'] = $v['r_id'];				$newData[$v['r_id']]['category']['date'] = $v['date'];				if (!isset($newData[$v['id']]['items'])) $newData[$v['id']]['items'] = Array();				$newData[$v['r_id']]['items'][] = Array(					'id' => $v['v_id'],					'image' => $v['image'],					'iTitle' => $v['video_title'],				);			}			return $newData;		}			}?>